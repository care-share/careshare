<div>
    <div class="panel panel-info" style={{computedStyle}}
        {{action "hoverOn" on="mouseEnter"}}
        {{action "hoverOff" on="mouseLeave"}}
        {{action 'expand' on="doubleClick"}}
    >
        {{#if (or expanded root.isExpanded)}}
            {{yield "expanded"}}
            <div style="float:left; padding-bottom:2px">
                {{!-- New element or existing element --}}
                {{#if (not isNomination)}}
                    {{#if isAdmin}}
                        <button class="nomination-button" {{action 'saveRecord'}}>Sign</button>
                    {{else}}
                        <button class="nomination-button" {{action 'saveRecord'}}>Save</button>
                    {{/if}}
                    {{#if root.isNewRecord}}
                        <button class="nomination-button" {{action 'deleteRecord'}}>Cancel</button>
                    {{else}}
                        <button class="nomination-button" {{action 'deleteRecord'}}>Delete</button>
                        <button class="nomination-button" {{action 'undoRecord'}}>Undo</button>
                    {{/if}}
                {{/if }}

                {{!-- Element with nomination(s) --}}
                {{#if isCreateNomination}}
                    {{#if isAdmin}}
                        <button class="nomination-button" {{action 'saveRecord'}}>Sign</button>
                        <button class="nomination-button" {{action 'deleteRecord'}}>Reject</button>
                    {{else}}
                        <button class="nomination-button" {{action 'saveRecord'}}>Save</button>
                        <button class="nomination-button" {{action 'deleteRecord'}}>Cancel</button>
                    {{/if}}
                {{/if}}
                {{#if isChangeNomination}}
                    {{#if isAdmin}}
                        <button class="nomination-button" {{action 'saveRecord'}}>Sign</button>
                        <button class="nomination-button" {{action 'undoRecord'}}>Reset</button>
                    {{else}}
                        <button class="nomination-button" {{action 'saveRecord'}}>Save</button>
                    {{/if}}
                {{/if}}
                {{#if isDeleteNomination}}
                    {{#if isAdmin}}
                        <button class="nomination-button" {{action 'acceptDeletion'}}>Sign</button>
                        <button class="nomination-button" {{action 'rejectDeletion'}}>Reject</button>
                    {{else}}
                        <button class="nomination-button" {{action 'rejectDeletion'}}>Cancel</button>
                    {{/if}}
                {{/if}}
            </div>
            <div style="float:right;" {{action 'toggleExpanded'}}> Less</div>
        {{else}}
            <div style="float:left;padding-bottom:2px">
                {{yield "contracted"}}

                {{!-- Home Health buttons for collapsed elements --}}
                {{#if (and (not isAdmin) isCreateNomination)}}
                    <div>
                        <button class="nomination-button" {{action 'deleteRecord'}}>Cancel</button>
                    </div>
                {{/if}}
                {{#if (and (not isAdmin) isDeleteNomination)}}
                    <div>
                        <button class="nomination-button" {{action 'rejectDeletion'}}>Cancel</button>
                    </div>
                {{/if}}

                {{!-- Physician buttons for collapsed elements --}}
                {{#if (and isAdmin isCreateNomination)}}
                    <div>
                        <button class="nomination-button" {{action 'saveRecord'}}>Sign</button>
                        <button class="nomination-button" {{action 'deleteRecord'}}>Reject</button>
                    </div>
                {{/if}}
                {{#if (and isAdmin isDeleteNomination)}}
                    <div>
                        <button class="nomination-button" {{action 'acceptDeletion'}}>Sign</button>
                        <button class="nomination-button" {{action 'rejectDeletion'}}>Reject</button>
                    </div>
                {{/if}}

            </div>
            {{#if currentHover}}
                <span class="expand-ellipsis" {{action 'toggleExpanded'}}> ...</span>
            {{/if}}

        {{/if}}

        {{#if isDeleteNomination}}
            <div class="deleted-overlay"></div>
        {{/if}}
    </div>
    <div class="careplan-notification">
        {{#if (or isCreateNomination root.isNewRecord)}}
            <span class="careplan-notification-badge"> New</span>
        {{/if}}
        {{#if isChangeNomination}}
            <span class="careplan-notification-badge"> Change</span>
        {{/if}}
        {{#if isDeleteNomination}}
            <span class="careplan-notification-badge"> Deleted</span>
        {{/if}}
        {{#if (gt root.unreadCount 0)}}
            <span class="icon-comment"> {{root.unreadCount}}</span>
        {{/if}}
    </div>
</div>
